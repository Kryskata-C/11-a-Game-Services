@model IEnumerable<WebApplication1.Data.Entities.Team>
@{
    ViewData["Title"] = "Team Hire";
}
<link rel="stylesheet" href="~/css/teamhire.css" asp-append-version="true" />

<div class="container team-hire-container">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="header">Hire a Team</h1>
        @if (User.IsInRole("Admin"))
        {
            <a asp-controller="Teams" asp-action="Create" class="btn btn-success" style="background-color: #00ff91; border-color: #00ff91; color: #111; font-weight: bold;">
                <i class="fas fa-plus-circle"></i> Add New Team
            </a>
        }
    </div>

    @if (Model != null && Model.Any())
    {
        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
            @foreach (var team in Model)
            {
                <div class="col">
                    <div class="team-card h-100">
                        @if (team.Id == 1)
                        {
                            <span class="popular-deal">Popular Deal</span>
                        }
                        <img src="@(string.IsNullOrEmpty(team.ImageUrl) ? "/images/default-team.png" : team.ImageUrl)" alt="Team Logo for @team.Name" class="team-logo-img">
                        <div class="team-info">
                            <h3>@team.Name</h3>
                            <p>@team.Description</p>
                            <p class="text-muted small">Players: @(team.Players?.Count ?? 0)</p>
                            <div class="price-tag">
                                @* Assuming PricePerHour is the discounted price, or you add an OriginalPrice property *@
                                @* <span class="price-original">$@((team.PricePerHour * 1.2m).ToString("F0"))/hour</span> *@
                                <span class="price-discounted">$@team.PricePerHour.ToString("F0")/hour</span>
                            </div>
                            @* Add a link to team details or a hire action *@
                            <a asp-controller="Teams" asp-action="Details" asp-route-id="@team.Id" class="btn hire-btn">View Team</a>
                            @* Or direct hire button if functionality exists:
                    <form asp-controller="Home" asp-action="AddToBasket" method="post" style="display:inline;">
                    <input type="hidden" name="teamId" value="@team.Id" />
                    <input type="hidden" name="teamName" value="@team.Name" />
                    <input type="hidden" name="price" value="@team.PricePerHour" />
                    <button type="submit" class="btn hire-btn">Hire @team.Name</button>
                    </form>
                    *@
                        </div>
                    </div>
                </div>
            }
        </div>
    }
    else
    {
        <div class="alert alert-info text-center">
            <p>No teams are currently available for hire.</p>
            @if (User.IsInRole("Admin"))
            {
                <p>You can <a asp-controller="Teams" asp-action="Create">add a new team</a>.</p>
            }
        </div>
    }
</div>

@* Font Awesome for the plus icon if you don't have it already - include in _Layout.cshtml *@
@* <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" /> *@

<style>
    .team-hire-container .header {
        color: #00ff91;
    }

    .team-card .team-logo-img {
        width: 100%;
        height: 200px; /* Or your desired height */
        object-fit: cover; /* To maintain aspect ratio */
        border-top-left-radius: calc(0.25rem - 1px);
        border-top-right-radius: calc(0.25rem - 1px);
    }
    /* Additional styles from your teamhire.css can be kept or merged */
    .team-card {
        /* Styles from your teamhire.css */
        background: #2b2b2b; /* Darker background for cards */
        border-radius: 8px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        color: #e0e0e0;
        overflow: hidden; /* Ensures image radius is respected */
        display: flex;
        flex-direction: column;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

        .team-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 255, 144, 0.3);
        }

    .team-info {
        padding: 1.25rem;
        flex-grow: 1; /* Allows footer content to align if cards have different text length */
        display: flex;
        flex-direction: column;
    }

        .team-info h3 {
            color: #00ff91;
            margin-bottom: 0.5rem;
        }

        .team-info p {
            font-size: 0.9rem;
            line-height: 1.5;
            margin-bottom: 1rem;
            flex-grow: 1; /* Pushes price and button down */
        }

    .price-tag {
        margin-bottom: 1rem;
        text-align: right;
    }

    .price-original {
        text-decoration: line-through;
        color: #a0a0a0;
        font-size: 0.9em;
        margin-right: 10px;
    }

    .price-discounted {
        color: #00ff91;
        font-size: 1.4em;
        font-weight: bold;
    }

    .hire-btn {
        background: linear-gradient(45deg, #00ff91, #00dd80);
        color: #111;
        font-weight: bold;
        padding: 0.6rem 1rem;
        border: none;
        border-radius: 50px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        cursor: pointer;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        align-self: center; /* Centers button if it's the last item */
        width: 80%;
        margin-top: auto; /* Pushes button to bottom */
    }

        .hire-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(0, 255, 144, 0.4);
        }

    .popular-deal {
        position: absolute;
        top: 15px;
        right: -30px;
        background-color: #ffc107; /* Bootstrap warning yellow */
        color: #333;
        padding: 5px 35px;
        font-size: 0.8rem;
        font-weight: bold;
        transform: rotate(45deg);
        z-index: 10;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
</style>